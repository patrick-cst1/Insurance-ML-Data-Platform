{
  "name": "HighValueClaimsActivator",
  "description": "Real-time alerting for high-value insurance claims (Fabric Activator)",
  "type": "Reflex",
  "dataSource": {
    "type": "Eventstream",
    "workspace": "Insurance-ML-Platform",
    "eventstream": "es_insurance_realtime"
  },
  "triggers": [
    {
      "name": "HighValueClaimDetected",
      "description": "Trigger when claim amount exceeds threshold",
      "condition": {
        "type": "threshold",
        "field": "amount",
        "operator": "greaterThan",
        "value": 50000
      },
      "actions": [
        {
          "type": "email",
          "to": ["claims-team@insurance.com"],
          "subject": "üö® High-Value Claim Alert",
          "body": "High-value claim detected:\n\nClaim ID: {{claim_id}}\nPolicy ID: {{policy_id}}\nAmount: ${{amount}}\nStatus: {{status}}\nTime: {{event_time}}"
        },
        {
          "type": "teams",
          "channel": "Claims Alerts",
          "message": "‚ö†Ô∏è High-value claim: ${{amount}} (Claim {{claim_id}})"
        }
      ]
    },
    {
      "name": "UrgentClaimStatus",
      "description": "Trigger on urgent claim status",
      "condition": {
        "type": "equals",
        "field": "status",
        "value": "URGENT"
      },
      "actions": [
        {
          "type": "email",
          "to": ["urgent-claims@insurance.com"],
          "subject": "‚ö° Urgent Claim Notification",
          "body": "Urgent claim requires immediate attention:\n\nClaim ID: {{claim_id}}\nPolicy ID: {{policy_id}}\nAmount: ${{amount}}\nTime: {{event_time}}"
        }
      ]
    },
    {
      "name": "MultipleClaimsSamePolicy",
      "description": "Detect potential fraud - multiple claims in short time",
      "condition": {
        "type": "count",
        "field": "policy_id",
        "timeWindow": "1 hour",
        "operator": "greaterThan",
        "value": 3
      },
      "actions": [
        {
          "type": "email",
          "to": ["fraud-detection@insurance.com"],
          "subject": "üîç Potential Fraud Alert",
          "body": "Multiple claims detected for same policy:\n\nPolicy ID: {{policy_id}}\nClaims Count (1hr): {{count}}\nPlease investigate for potential fraud."
        },
        {
          "type": "webhook",
          "url": "https://fraud-detection-api.insurance.com/alert",
          "method": "POST",
          "body": {
            "policy_id": "{{policy_id}}",
            "claims_count": "{{count}}",
            "alert_type": "multiple_claims",
            "timestamp": "{{event_time}}"
          }
        }
      ]
    }
  ],
  "schedule": {
    "enabled": true,
    "checkInterval": "realtime"
  }
}
